
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>JS События</title>
		<link  href="../script.css" rel="stylesheet">
		
	<script src ="../js/bild.js"></script>
	
	</head>
	<body>
	<script>
	toolbar('../../index.html','../Scriptmain.html');
	</script>
	<div class="content">
	
<h2>	WeakSet и WeakMap</h2>
<h3>	WeakSet</h3>
<p>
	Объект <span>WeakSet</span> во многом похож на обычное множество. Он также может хранить только уникальные значения, но каждый его элемент должен представлять объект.
	<br><br>
	Для создания объекта <span>WeakSet</span> используется его конструктор, в который можно передать начальные значения:
	<pre>
	// пустой WeakSet
	let weakSet1 = new WeakSet();
	// инициализация начальными значениями
	let weakSet2 = new WeakSet([{name:"Tom"}, {age: 34}]);
	</pre>
	Для инициализации как в случае с объектом Set в конструктор передается массив, но данный массив содержит именно объекты, а не скалярные значения, типа чисел или строк.
	<br><br>
	Для добавления данных в<span> WeakSet</span> применяется метод add():
	<pre>
	let weakSet = new WeakSet();
	weakSet.add({lang: "JavaScript"});
	weakSet.add({lang: "TypeScript"});
	// weakSet.add(34);	// так нельзя - 34 - число, а не объект
	console.log(weakSet);	// {{lang: "JavaScript"}, {lang: "TypeScript"}}
	</pre>
	Причем опять же добавить мы можем только объект, а не скалярные значения типа чисел или строк.
	<br><br>
	Для удаления применяется метод delete(), в который передается ссылка на удаляемый объект:
	<pre>
	let weakSet = new WeakSet();
	var js = {lang: "JavaScript"};
	var ts = {lang: "TypeScript"};
	weakSet.add(js);
	weakSet.add(ts);
	
	weakSet.delete(js);
	
	console.log(weakSet);	// {{lang: "TypeScript"}}
	</pre>
	Если надо проверить, имеется ли объект в WeakSet, то можно использовать метод has(), который возвращает true при наличии объекта:
	<pre>
	var js = {lang: "JavaScript"};
	var ts = {lang: "TypeScript"};
	var java = {lang: "Java"};
	let weakSet = new WeakSet([js, ts]);
	console.log(weakSet.has(ts));		// true
	console.log(weakSet.has(java));		//  false
	</pre>
	</p>
	<h3>WeakMap</h3>
	<p>
<span>	WeakMap</span> представляет развитие коллекции Map. Особенностью WeakMap является то, что все ее элементы должны представлять объекты. При этом объектами должны быть как ключи, так и значения.
	<br><br>
	Создание WeakMap:
	<pre>
	// пустой WeakMap
	let weakMap1 = new WeakMap();
	
	// WeakMap с инициализацией данными
	var key1 = {key:1};
	var key2 = {key:2};
	var value1 = {name: "Tom"};
	var value2 = {name: "Sam"};
	
	let weakMap2 = new WeakMap([[key1, value1], [key2, value2]]);
	</pre>
	Для получения объектов по ключу из <span>WeakMap </span>применяется метод get():
	<pre>
	var key1 = {key:1};
	var key2 = {key:2};
	var value1 = {name: "Tom"};
	var value2 = {name: "Sam"};
	
	let weakMap2 = new WeakMap([[key1, value1], [key2, value2]]);
	console.log(weakMap2.get(key1));	// {name: "Tom"}
	</pre>
	Для добавления новых объектов или изменения старых применяется метод set():
	<pre>
	var key1 = {key:1};
	var key2 = {key:2};
	var value1 = {name: "Tom"};
	var value2 = {name: "Sam"};
	
	let weakMap2 = new WeakMap([[key1, value1]]);
	weakMap2.set(key2, value2);
	weakMap2.set(key1, {name: "Kate"});
	console.log(weakMap2.get(key1));	//{name: "Kate"}
	console.log(weakMap2.get(key2));	//{name: "Sam"}
	</pre>
	Чтобы проверить наличие элемента по определенному ключу, применяется метод has(), который возвращает true при наличии элемента:
	<pre>
	var key1 = {key:1},
	key2 = {key:2};
	var value1 = {name: "Tom"},
	value2 = {name: "Sam"};
	
	let weakMap2 = new WeakMap([[key1, value1]]);
	console.log(weakMap2.has(key1));	// true
	console.log(weakMap2.has(key2));	// false
	</pre>
	Для удаления элемента по ключу применяется метод delete():
	<pre>
	var key1 = {key:1},
	key2 = {key:2};
	var value1 = {name: "Tom"},
	value2 = {name: "Sam"};
	
	let weakMap2 = new WeakMap([[key1, value1], [key2, value2]]);
	console.log(weakMap2.has(key1));	// true
	weakMap2.delete(key1);
	console.log(weakMap2.has(key1));	//

</pre>
	<a href="Test/DesignerTest.html" id="out">Output</a>
	
  </div>
 </body>
</html>