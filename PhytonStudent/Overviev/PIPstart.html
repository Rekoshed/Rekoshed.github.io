
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Phyton обзор</title>
		  <link  href="../../Design/script.css" rel="stylesheet">
		  <link  href="../../Design/toolbar.css" rel="stylesheet">
		  <script src ="../../Design/bild.js"></script>
		  </head>
     <body>
	     <script>
	 		toolbar('../../index.html','../PyMain.html');
		 </script>
			<div class="content">
	   
                <h3>Установка pip</h3>

                <p>На macOS и Windows  PiP идёт в одной коробке с интерпретатором Python. На Ubuntu его нужно поставить отдельно:</p>
                
                <pre><code id="cmd">$ sudo apt update
$ sudo apt install python3-pip
                </code></pre>
                
                <h3>Запуск pip</h3>
                
                <p>pip можно запускать непосредственно командой <code>pip</code>. 
                  Но лучше воспользоваться более длинной командой,
                   которая гарантировано вызовет самую свежую установленную версию pip для нужной версии Python — 
                   в системе уже может быть установлен Py2 с соответствующей версией pip, как правило, довольно старой.</p>
                
                <p>Вызываем pip:</p>
          <p> <span id="cmd"> $ python3 -m pip --version </span> </p>
                
               
                <p>При показе своей версии pip также сообщает, куда установлен он сам и на какой версии Python он был запущен.</p>
                
                 <h3>Установка первого пакета</h3>
                
                <p>Установим же первый пакет! Пусть это будет пакет <a href="https://pypi.org/project/cowsay" target="_blank">cowsay</a>, 
                  но установим в пользовательское окружение. Потому что:</p>
                
                <ul>
                <li>мы не помешаем своими пакетами другим пользователям системы,</li>
                <li>нам не потребуются права администратора (у пользователя их может и не быть),</li>
                <li>мы не поломаем саму операционную систему случайной установкой более свежего пакета, чем тот, который требуется системе для нормальной работы (особенно это важно в Linux, где многие системные задачи решаются с помощью Python).</li>
                </ul>
                
                <p>Установка cowsay:</p>
                <p> <span id="cmd">python3 -m pip install cowsay</span></p>
                <p> Далее:</p>
              <pre class="python">
                  ~$ python3
                  
                  >>> import cowsay
                  >>> cowsay.cow('hellower')
                    ________
                  &lt; hellower >
                    ========
                               \
                                \
                                  ^__^                             
                                  (oo)\_______                   
                                  (__)\       )\/\             
                                      ||----w |           
                                      ||     ||  
                                      
                                      
                  >>> 
                  
              </pre>

                
                <p>Как видите,  пакет — забавный :)</p>
                
                <p>Флаг <code>–-user</code> команды <code>pip install</code> сообщает pip, что мы хотим установить пакет в
                   глобальное окружение текущего пользователя. Если этот флаг не указать,
                    то pip установит пакет в общесистемное окружение. Старайтесь не делать так!</p>
                
                <h3>pip, точки входа и PATH</h3>
                
                <p>Установленный пакет <b>cowsay</b>, как мы видели выше, может быть использован из кода. 
                  Но этот пакет имеет ещё и так называемую <em>точку входа</em> (или <em>entry point</em>).</p>
                
                <p>Точки входа, это готовые к исполнению программы, содержащиеся в пакете. 
                  Если у пакета есть таковые, то pip создаст для каждой специальный исполняемый скрипт,
                   который позволит удобно запускать программу из командной оболочки. 
                   Но нужно помнить, что путь до директории, в которую pip помещает такие скрипты 
                   (на Linux это <code>~/.local/bin</code>) нужно добавить в <code>PATH</code>! </p>
                   
                <p>Точка входа, это всегда Python-модуль, пригодный для запуска в роли программы 
                  (такие программы называют ещё <em>исполняемыми файлами</em>, позже мы рассмотрим, как такие делать).
                   Создаваемые pip'ом скрипты внутри вызывают <code>python3 -m имя_модуля</code>, 
                   поэтому установленный нами cowsay можно запускать точно также:</p>
                <pre class="python">
                    ~$ python3 -m cowsay pyHello
                    _______
                  &lt; pyHello >
                    =======
                              \
                               \
                                 ^__^                             
                                 (oo)\_______                   
                                 (__)\       )\/\             
                                     ||----w |           
                                     ||     ||  
                                     
                  
                </pre>
                <h3>Всегда свежий pip!</h3>
                
                <p>Конечно cам pip, это тоже точка входа одноимённого пакета pip, поэтому мы его запускаем командой 
                  <code>python3 -m pip</code>. А ещё pip может устанавливать и, обновлять! 
                  Вы можете установить свежий pip в пользовательское окружение 
                  (именно туда, чтобы не сломать системный pip) с помощью такой команды:</p>
                
                <pre><code id="cmd">$ python3 -m pip install --user --upgrade pip
                </code></pre>
                
                <p>Флаг <code>--upgrade</code> позволит обновить уже установленный пакет, если в индексе найдётся более новая версия.</p>
                
                

                  <h3>Альтернативные индексы пакетов</h3>
                
                <p>Если вызывать команду <code>pip install</code> с опцией <code>--index-url &lt;url&gt;</code>, 
                  то pip будет искать пакет и все его зависимости в индексе по указанному url.
                  Установим пакет из специального тренировочного индекса 
                   <a href="http://test.pypi.org/" target="_blank">Test PyPI</a>:</p>
                
               
                <p>Заметьте, что url индекса указан в виде <code>что-то-там/simple</code> — 
                  именно так по соглашению должны именоваться индексы.</p>
                
                <p>Test PyPI содержит плюс-минус все пакеты, которые есть в основном PyPI,
                   но обычно держателям локальных индексов не хочется держать у себя копии всех версий всех пакетов — 
                   хочется хранить только свои пакеты, а все внешние зависимости получать из другого индекса (обычно это уже общий PyPI).
                    У pip и для такого случая есть опция! Всего-то и нужно в дополнение к <code>--index-url</code> указать <code>--extra-index-url &lt;url&gt;</code>.
                     В такой конфигурации pip ищет каждый пакет в первом индексе, а если не найдёт, то обращается ко второму, 
                     дополнительному индексу. Команда целиком может выглядеть так:</p>
                
                <pre><code class="sh">$ python3 -m pip install --user --index-url https://test.pypi.org/simple --extra-index-url https://pypi.org/simple dogesay
                </code></pre>
                
                <h3>Установка пакетов из репозиториев на GitHub</h3>
                
                <p>Иногда пакет не хочется выкладывать на PyPI, скажем, по причине того, что пакет ещё совсем "сырой", но при этом нужно проверить, как пакет работает и устанавливается ли вообще. В подобных случаях пакеты устанавливают прямо из git-репозиториев. Давайте установим с помощью pip наш учебный <a href="https://github.com/hexlet-boilerplates/python-package" target="_blank">hexlet-boilerplates/python-package</a>:</p>
                
                <script id="asciicast-247247" src="https://asciinema.org/a/247247.js" data-cols="80" data-rows="6" data-size="medium" data-preload="1" async></script>
                
                <p>Здесь вместо имени пакета указывается тот же url, который вы использовали бы при клонировании репозитория, но дополненный приставкой <code>git+</code>. Эта приставка подсказывает pip, что по url расположен Git-репозиторий — не обязательно размещённый на GitHub.</p>
                
                <p>Во время установки пакета, pip вызывает <code>git clone</code> для клонирования репозитория во временную папку. Если репозиторий закрытый, то у вас будут запрошены имя пользователя и пароль для доступа к репозиторию — это работает и с приватными репозиториями GitHub!</p>
                
                <p>Управлять установкой пакетов из систем контроля версий (да, систем — pip поддерживает не только Git!) можно очень гибко, например, указывать ветки, теги или хэши коммитов, по которым расположена желаемая версия пакета. Подробнее можно почитать <a href="https://pip.pypa.io/en/stable/reference/pip_install/#vcs-support" target="_blank">тут</a>.</p>
                
                <hr>
                
                <p>Мы рассмотрели далеко не все виды источников пакетов, да и саму команду <code>pip install</code> рассмотрели очень поверхностно. По возможности рекомендуем изучить эту и прочие команды pip самостоятельно, ведь pip — один из ключевых инструментов разработчика на Python!</p>
                


            </div>
  </div>
 </body>
</html>