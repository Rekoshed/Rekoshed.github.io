
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Phyton обзор</title>
		  <link  href="../../Design/script.css" rel="stylesheet">
		  <link  href="../../Design/toolbar.css" rel="stylesheet">
		  <script src ="../../Design/bild.js"></script>
		  </head>
     <body>
	     <script>
	 		toolbar('../../index.html','../PyMain.html');
		 </script>
			<div class="content">
	   
			
<p>Очевидно, что как минимум разработчику на Python нужен какой-то механизм, позволяющий содержать разные проекты в изолированных "песочницах". Такой механизм существует и называется <em>виртуальные окружения</em>.</p>

<h3>Устройство виртуальных окружений</h3>

<p>Каждое виртуальное окружение представляет собой директорию, содержимое которой структурно напоминает общесистемное окружение — поддиректории соответственно названы и наполнены. Давайте рассмотрим пример:</p>

<pre><code id='cmd'>$ tree env
env
├── bin
│   ├── activate
│   …
│   ├── pip
│   …
│   └── python3 -&gt; …/python3
├── lib
│   └── python3.6
│       └── site-packages
│           ├── pip
│           │   ├── …
│           …
│           └── setuptools-40.6.2.dist-info
│               ├── …
…
</code></pre>


<p>При работе в окружении нужно запускать не системные Python и pip, а исполняемые файлы из папки <code>bin</code>. Дело в том, что интерпретатор Python, когда находится в окружении, знает, что по относительному (к директории <code>bin</code>) пути <code>../lib/python3.6</code> находятся все доступные пакеты. И копия <code>pip</code> из директории <code>bin/</code> устанавливает пакеты в это же окружение, не затрагивая систему. Получается та самая желанная изоляция!</p>

<h3>Создание виртуального окружения</h3>

<p>Конечно же, вручную создавать всю описанную иерархию директорий и файлов не нужно — для этого есть специальный модуль <code>venv</code>.</p>

<p>В macOS и Windows этот модуль, как и pip, входит в поставку Python. На Ubuntu же его нужно установить отдельно командой</p>

<pre><code id='cmd'>$ sudo apt install python3-venv
</code></pre>

<p>Проверим, что модуль установлен и пригоден к использованию:</p>

<p> <span id='cmd'> ~$ python3 -m venv --help </span></p>

<p>Создаётся окружение командой <code>python3 -m venv имя_окружения</code>. Давайте создадим одно и установим в это окружение пакет cowsay:</p>
<pre class="python">
        $ python3 -m venv first_venv
        $ first_venv/bin/pip install cowsay
        $ first_venv/bin/cowsay hello
</pre>

<p>Вы можете видеть, что пакет устанавливается вместе с точкой входа, которую можно вызвать командой <code>first_venv/bin/cowsay</code>, а также сам пакет становится доступен интерпретатору, но только тому, что <em>запущен из окружения</em>.</p>

<p>В принципе в таком виде виртуальное окружение уже можно использовать полноценно. Но вводить команды с префиксом <code>first_env/bin/</code> не очень-то хочется, и есть способ упростить вызов команд, доступных в окружении — <em>активация</em>.</p>

<h3>Активация окружения</h3>

<p>При создании окружения в поддиректорию <code>bin</code> помещается сценарий оболочки, который на macOS и Ubuntu называется <code>activate</code>, а на Windows — <code>activate.bat</code>. Этот сценарий нужно выполнить:</p>

<ul>
<li>на macOS и Ubuntu вызвать команду</li>
</ul>

<pre><code id='cmd'>$ source first_venv/bin/activate
</code></pre>

<ul>
<li>на Windows вызвать команду</li>
</ul>

<pre><code id='cmd'>C:\&gt; first_venv\bin\activate.bat
</code></pre>


<p> после активации необходимости указывать путь до вызываемого исполняемого файла.</p>

<blockquote>
<p>Ещё вы могли заметить, что приглашение оболочки изменилось: в нём стало отображаться имя окружения. Этот трюк работает на macOS и Ubuntu и позволяет всегда видеть, что мы находимся в виртуальном окружении.</p>
</blockquote>

<p>Деактивация же окружения делается командой <code>deactivate</code>, которая становится доступна после активации.</p>

<blockquote>
<p>Активирование и деактивация окружения влияют только на текущую сессию (заметны только в этом конкретном терминале). Что позволяет иметь несколько окружений и активировать их одновременно в разных окнах терминала.</p>
</blockquote>

            </div>
  </div>
 </body>
</html>